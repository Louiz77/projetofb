# CONTEXT.MD - VANADUS Fashion Brand E-commerce

## ğŸ“‹ VisÃ£o Geral do Projeto

**VANADUS** Ã© uma loja de e-commerce de roupas focada no mercado do Reino Unido, especializada em moda alternativa (goth, streetwear, y2k, grunge, emo, punk) atravÃ©s de modelo de dropshipping com integraÃ§Ã£o Shopify.

**Slogan:** "FOR THE UNTAMED" / "SILENCE IS JUST THE PRELUDE TO CHAOS"

---

## ğŸ—ï¸ Arquitetura e Tecnologias

### Stack Principal
- **Frontend:** React 19.0.0 (Create React App)
- **Roteamento:** React Router DOM 7.6.2
- **Estado e API:** Apollo Client 3.13.8 (GraphQL)
- **Backend de Dados:** 
  - Shopify Storefront API (GraphQL) - Produtos, carrinho, checkout
  - Firebase (Firestore + Auth) - Carrinho de convidados, wishlist, autenticaÃ§Ã£o
- **EstilizaÃ§Ã£o:** 
  - Tailwind CSS 3.4.17
  - Bootstrap 5.3.6 (parcial)
  - React Bootstrap 2.10.10
- **Analytics:** Vercel Analytics 1.5.0
- **Ãcones:** Lucide React 0.515.0

### ConfiguraÃ§Ãµes Shopify
- **Store URL:** `vanadus.myshopify.com`
- **API Version:** `2025-04`
- **Storefront Access Token:** Configurado no `ShopifyClient.js`
- **Endpoint GraphQL:** `https://vanadus.myshopify.com/api/2025-04/graphql.json`

### ConfiguraÃ§Ãµes Firebase
- **Project ID:** `vanadus-32c2a`
- **Auth Domain:** `vanadus-32c2a.firebaseapp.com`
- **Storage:** Firebase Storage habilitado
- **Firestore:** Habilitado com persistÃªncia offline (IndexedDB)

---

## ğŸ“ Estrutura do Projeto

```
projetofb/
â”œâ”€â”€ public/                          # Assets estÃ¡ticos
â”‚   â”œâ”€â”€ imagens de banner e hero
â”‚   â”œâ”€â”€ logo.png, favicon.ico
â”‚   â””â”€â”€ manifest.json
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ App.js                       # Componente principal com rotas
â”‚   â”œâ”€â”€ index.js                     # Entry point com Apollo Provider
â”‚   â”œâ”€â”€ index.css                    # Estilos globais + Tailwind
â”‚   â”œâ”€â”€ client/
â”‚   â”‚   â”œâ”€â”€ ShopifyClient.js         # Cliente Apollo para Shopify
â”‚   â”‚   â””â”€â”€ firebaseConfig.js        # ConfiguraÃ§Ã£o Firebase
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ Header.js                # Header com mega menu e carrinho
â”‚   â”‚   â”œâ”€â”€ Footer.js                # Footer com links e redes sociais
â”‚   â”‚   â”œâ”€â”€ ProductCard.js           # Card de produto reutilizÃ¡vel
â”‚   â”‚   â””â”€â”€ Home/
â”‚   â”‚       â”œâ”€â”€ HeroBanner.js        # Banner hero principal
â”‚   â”‚       â”œâ”€â”€ GenderSplitBanner.js # Banner dividido por gÃªnero
â”‚   â”‚       â”œâ”€â”€ CarouselSection.js   # Carrossel de produtos
â”‚   â”‚       â”œâ”€â”€ ProductSection.js    # SeÃ§Ã£o de coleÃ§Ãµes (modais)
â”‚   â”‚       â”œâ”€â”€ GridProduct.js       # Grid de produtos
â”‚   â”‚       â”œâ”€â”€ FeaturedProducts.js  # Produtos em destaque
â”‚   â”‚       â”œâ”€â”€ CategoryFilter.js    # Filtros de categoria
â”‚   â”‚       â”œâ”€â”€ CategoryFilterSection.js
â”‚   â”‚       â”œâ”€â”€ NewsletterSection.js # Newsletter signup
â”‚   â”‚       â”œâ”€â”€ PromotionalBanner.js # Banners promocionais
â”‚   â”‚       â”œâ”€â”€ AccountBanner.js     # Banner de conta
â”‚   â”‚       â””â”€â”€ ProductCard.js       # Card de produto da home
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ Home.js                  # PÃ¡gina inicial
â”‚   â”‚   â”œâ”€â”€ ProductsPage.js          # PÃ¡gina de produtos por tag
â”‚   â”‚   â”œâ”€â”€ ProductDetail.js         # Detalhes do produto
â”‚   â”‚   â”œâ”€â”€ Cart.js                  # Modal de carrinho
â”‚   â”‚   â”œâ”€â”€ Wishlist.js              # Lista de desejos
â”‚   â”‚   â”œâ”€â”€ Account.js               # Login/Registro/Perfil
â”‚   â”‚   â”œâ”€â”€ Contact.js               # Contato
â”‚   â”‚   â””â”€â”€ FAQ.js                   # Perguntas frequentes
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ useCart.js               # Context do carrinho (abrir/fechar)
â”‚   â”‚   â”œâ”€â”€ addToCart.js             # LÃ³gica de adicionar ao carrinho
â”‚   â”‚   â”œâ”€â”€ addWishlist.js           # LÃ³gica de wishlist
â”‚   â”‚   â””â”€â”€ wishlist.js              # Hooks de wishlist
â”‚   â””â”€â”€ styles/
â”‚       â””â”€â”€ ProductsPage.css         # Estilos especÃ­ficos da pÃ¡gina de produtos
â”œâ”€â”€ package.json                     # DependÃªncias e scripts
â”œâ”€â”€ tailwind.config.js               # ConfiguraÃ§Ã£o Tailwind (4K+ suportado)
â”œâ”€â”€ postcss.config.js                # ConfiguraÃ§Ã£o PostCSS
â”œâ”€â”€ README.md                        # DocumentaÃ§Ã£o bÃ¡sica
â”œâ”€â”€ SHOPIFY_DISCOUNT_SETUP.md       # Guia de descontos de coleÃ§Ã£o
â””â”€â”€ CONFIGURE_COLLECTION_METAFIELDS.md # Guia de metafields

```

---

## ğŸ¨ Design System e Paleta de Cores

### Cores Principais
- **Preto:** `#1C1C1C`, `#000000` (backgrounds principais)
- **Vermelho:** `#8A0101` (accent principal, botÃµes)
- **Roxo:** `#4B014E`, `#6B0261` (accent secundÃ¡rio)
- **Creme:** `#F3ECE7` (textos claros, backgrounds)
- **Cinza:** VariaÃ§Ãµes para textos e bordas

### Tipografia
- **Fonte Custom:** `FtVortex-G3ZDy.otf` (fonte gÃ³tica personalizada)
- **Font Stack:** `Helvetica Neue, sans-serif` (fallback)
- **Estilo:** Bold, tracking-wider (espaÃ§amento entre letras)

### Breakpoints (Tailwind Config)
- Mobile: `< 768px`
- Tablet: `768px - 1440px`
- Desktop: `1440px - 1920px`
- Large: `1920px - 2560px`
- 4K+: `2560px+`
- Ultra Wide: `3840px+`

---

## ğŸ”‘ Funcionalidades Principais

### 1. CatÃ¡logo de Produtos

#### Busca e Filtragem
- **Por Tags:** Produtos organizados por tags (Hot-Topics, Top, Bottom, Dresses, Footwear, Accessories, Bags)
- **Por Categoria:**
  - MEN: Footwear, Top, Bottom, Accessories
  - WOMEN: Footwear, Top, Bottom, Full-Body, Accessories
  - STYLE: Goth, Streetwear, Y2K, Grunge, Emo, Punk
- **Metafields:** Suporte a metafields customizados e metaobjetos Shopify para gÃªnero alvo
- **Filtros:** Por preÃ§o, tamanho, cor, estilo (implementaÃ§Ã£o bÃ¡sica)

#### Produtos
- Variantes (tamanho, cor, etc.)
- Imagens mÃºltiplas
- PreÃ§os com suporte a `compareAtPrice` (descontos)
- Badges automÃ¡ticos (estoque limitado, novo, promoÃ§Ã£o)
- Disponibilidade em tempo real

### 2. Sistema de Carrinho

#### Funcionalidades
- **Dual Storage:**
  - UsuÃ¡rios logados: Firebase Firestore (tempo real)
  - Convidados: localStorage (com eventos customizados)
- **SincronizaÃ§Ã£o Shopify:** Carrinho sincronizado com Shopify via GraphQL
- **PersistÃªncia:** Carrinho mantido entre sessÃµes
- **Modal Sidebar:** Carrinho lateral deslizante
- **Quantidade:** Ajuste de quantidade com sincronizaÃ§Ã£o

#### OperaÃ§Ãµes
- `cartCreate` - Criar novo carrinho
- `cartLinesAdd` - Adicionar itens
- `cartLinesUpdate` - Atualizar quantidade
- `cartLinesRemove` - Remover itens
- `cartDiscountCodesUpdate` - Aplicar cÃ³digos de desconto

### 3. Sistema de Descontos de ColeÃ§Ã£o

#### Metafields de ColeÃ§Ã£o
- `custom.discount_percentage` (Integer, 1-99): Percentual de desconto
- `custom.min_items_for_discount` (Integer, 1-10): Itens mÃ­nimos para desconto

#### Funcionalidades
- Modal de coleÃ§Ã£o mostra desconto baseado em metafields
- Desconto aplicado via cÃ³digo (`cartDiscountCodesUpdate`)
- ValidaÃ§Ã£o de itens mÃ­nimos antes de aplicar desconto
- Suporte a desconto automÃ¡tico no Shopify (configuraÃ§Ã£o alternativa)

### 4. Sistema de Wishlist

#### Funcionalidades
- **Dual Storage:** Firebase (usuÃ¡rios) ou localStorage (convidados)
- **SincronizaÃ§Ã£o em tempo real:** Firebase `onSnapshot` para usuÃ¡rios logados
- **Filtros:** Por categoria, ordenaÃ§Ã£o (preÃ§o, nome)
- **Views:** Grid ou Lista
- **AÃ§Ãµes:** Adicionar ao carrinho, remover, compartilhar

### 5. AutenticaÃ§Ã£o de UsuÃ¡rios

#### Firebase Auth
- **Login:** Email e senha
- **Registro:** Email, senha, nome
- **Estado:** Monitorado via `onAuthStateChanged`
- **Perfil:** InformaÃ§Ãµes bÃ¡sicas (email, data de criaÃ§Ã£o, Ãºltimo login)

#### Recursos
- ValidaÃ§Ã£o de formulÃ¡rios
- Feedback visual (mostrar/ocultar senha)
- PersistÃªncia de sessÃ£o
- Logout

### 6. NavegaÃ§Ã£o e Menu

#### Header
- **Fixo com scroll:** Esconde ao rolar para baixo, mostra ao rolar para cima
- **Mega Menu Desktop:** Hover para Men, Women, Style com subcategorias
- **Menu Mobile:** Hamburger com navegaÃ§Ã£o hierÃ¡rquica
- **Ãcones:** Wishlist, Account, Cart (com contador)
- **Logo:** VANADUS + "FOR THE UNTAMED"

#### Rotas Principais
```
/ (Home)
/product/:productId (Detalhes do produto)
/tag/:tag (Produtos por tag)
/tag/:tag/:subcategory (Produtos por tag e subcategoria)
/cart (Modal de carrinho)
/wishlist (Lista de desejos)
/account (Login/Registro/Perfil)
/contact (Contato)
/faq (FAQ)
```

---

## ğŸ“Š Queries GraphQL Principais

### Produtos
```graphql
# Produtos por tag
query GetProductsByTag($tag: String!, $first: Int = 50) {
  products(first: $first, query: $tag) {
    edges {
      node {
        id, title, tags, handle
        metafields(identifiers: [{namespace: "shopify", key: "target-gender"}])
        images(first: 3) { edges { node { url } } }
        variants(first: 10) {
          edges {
            node {
              id, title, price { amount }, compareAtPrice { amount }
              availableForSale, quantityAvailable, image { url }
            }
          }
        }
      }
    }
  }
}

# Produtos da Home (Hot-Topics, Top, Bottom, etc.)
query {
  hotTopicsProducts: products(first: 10, query: "tag:Hot-Topics") { ... }
  topProducts: products(first: 10, query: "tag:Top") { ... }
  # ... outras queries por tag
}

# ColeÃ§Ãµes com metafields de desconto
query {
  collections(first: 10) {
    edges {
      node {
        id, title, description, image { url }
        discountPercentage: metafield(namespace: "custom", key: "discount_percentage") { value }
        minItemsForDiscount: metafield(namespace: "custom", key: "min_items_for_discount") { value }
        products(first: 10) { ... }
      }
    }
  }
}
```

### Carrinho
```graphql
# Criar carrinho
mutation {
  cartCreate(input: {}) {
    cart { id, checkoutUrl }
  }
}

# Adicionar itens
mutation ($cartId: ID!, $lines: [CartLineInput!]!) {
  cartLinesAdd(cartId: $cartId, lines: $lines) {
    cart { checkoutUrl }
  }
}

# Aplicar desconto
mutation ($cartId: ID!, $discountCodes: [String!]!) {
  cartDiscountCodesUpdate(cartId: $cartId, discountCodes: $discountCodes) {
    cart { id, discountCodes { code, applicable } }
    userErrors { field, message }
  }
}
```

---

## ğŸ¯ Funcionalidades Especiais

### Modais de Produto e ColeÃ§Ã£o
- **Modal de Produto Individual:** SeleÃ§Ã£o de variantes com carrossel de imagens, adicionar ao carrinho/wishlist
- **Modal de ColeÃ§Ã£o:** VisualizaÃ§Ã£o de produtos da coleÃ§Ã£o, seleÃ§Ã£o mÃºltipla, desconto automÃ¡tico baseado em metafields

### CarrossÃ©is e SeÃ§Ãµes
- **Carrossel de Produtos:** NavegaÃ§Ã£o por setas, responsivo, suporte a 4K+
- **SeÃ§Ã£o de ColeÃ§Ãµes:** Grid de coleÃ§Ãµes com modais interativos
- **Hero Banners:** Banners promocionais com imagens e CTAs

### Sistema de NotificaÃ§Ãµes
- Feedback visual para aÃ§Ãµes (adicionar ao carrinho, wishlist)
- NotificaÃ§Ãµes de sucesso/erro com auto-dismiss

---

## ğŸ”§ ConfiguraÃ§Ãµes e VariÃ¡veis de Ambiente

### Shopify
- **Storefront Access Token:** Armazenado em `ShopifyClient.js` (dev ser movido para env em produÃ§Ã£o)
- **API Version:** Hardcoded como `2025-04`

### Firebase
- **Config:** Hardcoded em `firebaseConfig.js` (dev ser movido para env em produÃ§Ã£o)
- **Persistence:** IndexedDB habilitado para offline

---

## ğŸ“¦ Estrutura de Dados

### Carrinho (Firestore/localStorage)
```javascript
{
  items: [
    {
      id: "gid://shopify/ProductVariant/...", // variantId
      name: "Nome do Produto",
      price: 99.99,
      image: "url",
      quantity: 1
    }
  ]
}
```

### Wishlist (Firestore/localStorage)
```javascript
{
  items: [
    {
      id: "gid://shopify/ProductVariant/...",
      name: "Nome do Produto",
      price: 99.99,
      image: "url",
      variantId: "...",
      quantity: 1,
      category: "camisetas" // opcional
    }
  ]
}
```

### Produto Transformado (Frontend)
```javascript
{
  id: "gid://shopify/Product/...",
  name: "Nome do Produto",
  image: "url",
  price: 99.99,
  originalPrice: 129.99, // se houver desconto
  discount: 23, // percentual
  tags: ["tag1", "tag2"],
  metafields: { genero_alvo: "WOMEN", ... },
  variants: [
    {
      id: "gid://shopify/ProductVariant/...",
      title: "Tamanho M / Cor Preto",
      price: { amount: "99.99" },
      compareAtPrice: { amount: "129.99" },
      availableForSale: true,
      image: { url: "..." }
    }
  ],
  availableForSale: true,
  stockLevel: 10,
  stockBadge: "Limited stock!" // se < 20
}
```

---

## ğŸš€ Scripts DisponÃ­veis

```bash
npm start      # Desenvolvimento (http://localhost:3000)
npm run build  # Build de produÃ§Ã£o
npm test       # Testes
npm run eject  # Ejetar configuraÃ§Ã£o (irreversÃ­vel)
```

---

## ğŸ“ Notas de Desenvolvimento

### PadrÃµes de CÃ³digo
- **Hooks Customizados:** `useCart`, hooks de wishlist para reutilizaÃ§Ã£o
- **TransformaÃ§Ã£o de Dados:** FunÃ§Ãµes `transformProduct` e `transformCollection` para padronizar dados do Shopify
- **GraphQL:** Queries e mutations organizadas nos componentes
- **EstilizaÃ§Ã£o:** Tailwind CSS como base, CSS modules onde necessÃ¡rio

### Tratamento de Erros
- Try-catch em operaÃ§Ãµes assÃ­ncronas
- Alertas para feedback do usuÃ¡rio (pode ser melhorado com toast notifications)
- Fallbacks para dados ausentes

### Performance
- **Cache:** Apollo Client com `cache-first` por padrÃ£o
- **Lazy Loading:** Imagens com `loading="lazy"`
- **Responsividade:** Breakpoints otimizados para telas grandes (4K+)
- **PersistÃªncia Offline:** Firebase IndexedDB para carrinho

### Melhorias Futuras
- Migrar tokens/chaves para variÃ¡veis de ambiente
- Implementar sistema de toast notifications
- Adicionar testes unitÃ¡rios e de integraÃ§Ã£o
- Otimizar imagens (lazy loading, webp)
- Implementar SSR/SSG (Next.js?)
- InternacionalizaÃ§Ã£o (i18n)
- Analytics mais detalhados

---

## ğŸ¯ Mercado e PÃºblico-Alvo

### Nicho
- Moda alternativa (Goth, Streetwear, Y2K, Grunge, Emo, Punk)
- Mercado do Reino Unido
- Dropshipping (sem estoque prÃ³prio)

### Demografia
- Jovens adultos (18-35)
- Interesse em moda alternativa e subculturas
- ConfortÃ¡vel com compras online

---

## ğŸ“š DocumentaÃ§Ã£o Adicional

- `SHOPIFY_DISCOUNT_SETUP.md` - Guia detalhado de configuraÃ§Ã£o de descontos de coleÃ§Ã£o
- `CONFIGURE_COLLECTION_METAFIELDS.md` - Como configurar metafields nas coleÃ§Ãµes
- `README.md` - DocumentaÃ§Ã£o bÃ¡sica do Create React App

---

## ğŸ” SeguranÃ§a

### ConsideraÃ§Ãµes
- **Tokens Shopify:** Atualmente hardcoded (deve ser movido para env)
- **Firebase Config:** Hardcoded (deve ser movido para env)
- **AutenticaÃ§Ã£o:** Firebase Auth com validaÃ§Ã£o de email/senha
- **Carrinho Convidado:** localStorage (dados nÃ£o sensÃ­veis)

### RecomendaÃ§Ãµes
- Usar variÃ¡veis de ambiente para todas as chaves/tokens
- Implementar rate limiting no backend
- Validar dados no servidor (Shopify jÃ¡ faz isso)
- HTTPS obrigatÃ³rio em produÃ§Ã£o

---

**Ãšltima AtualizaÃ§Ã£o:** Janeiro 2025
**VersÃ£o do Projeto:** 0.1.0
